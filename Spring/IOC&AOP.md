# IOC & AOP

[TOC]

## IOC

 IoC（Inverse of Control:控制反转）是⼀种**设计思想**，就是将原本在程序中⼿动创建对象的控制权，交由Spring框架来管理。 IoC 在其他语⾔中也有应⽤，并⾮ Spring 特有。

 IoC 容器是 Spring⽤来实现 IoC 的载体， IoC 容器实际上就是个Map（key，value）,Map 中存放的是各种对象。**将对象之间的相互依赖关系交给 IoC 容器来管理，并由 IoC 容器完成对象的注⼊**，也即将new的过程交给spring容器去处理。这样可以很⼤程度上简化应⽤的开发，把应⽤从复杂的依赖关系中解放出来。 IoC 容器就像是⼀个⼯⼚⼀样，当我们需要创建⼀个对象的时候，只需要配置好配置⽂件/注解即可，完全不⽤考虑对象是如何被创建出来的。



## DI

依赖注入：站在容器的角度，spring框架**在创建bean对象时，动态的将依赖对象注入到bean组件中**

DI是BeanFactory生产Bean时为了解决Bean之间的依赖的一种技术而已，一般都不直接用BeanFactory，而是用它的实现类ApplicationContext

依赖注入DI是指程序运行过程中，若需要调用另一个对象协助时，无须在代码中创建被调用者，而是依赖于外部容器，由外部容器创建后传递给程序。依赖注入是目前最优秀的解耦方式。依赖注入让Spring的Bean之间以配置文件的方式组织在一起，而不是以硬编码的方式耦合在一起的。



## IOC和DI的区别

**依赖注入**明确描述了“**被注入对象依赖IoC容器配置依赖对象**”。

IOC是个更宽泛的概念，DI是更具体的。

ioc是目的，di是手段





## AOP

 AOP(Aspect-Oriented Programming:⾯向切⾯编程)能够将那些与业务⽆关，却为业务模块所共同调⽤的逻辑或责任（例如事务处理、⽇志管理、权限控制等）封装起来，便于减少系统的重复代码，降低模块间的耦合度，并有利于未来的可拓展性和可维护性。

 Spring AOP就是基于动态代理的，如果要代理的对象，实现了某个接⼝，那么Spring AOP会使⽤JDKProxy，去创建代理对象，⽽**对于没有实现接⼝的对象**，就⽆法使⽤ JDK Proxy 去进⾏代理了，这时候Spring AOP会使⽤基于asm框架字节流的Cglib动态代理 ，这时候Spring AOP会使⽤ Cglib **⽣成⼀个被代理对象的⼦类来作为代理**。

JDK：spring默认动态代理，需要实现接口

CGLIB：通过asm框架序列化字节流，可配置，性能差



## Spring如何实现依赖注入

通过spring getBean()拿到的对象实例，都是**通过读取applicationContext.xml文件，再通过反射拿到的类的实例对象**。

因此，spring注入的对象必须可以实例化，也就是说，接口和抽象类是不能通过spring实现注入的，因为两者都不能实例化。

