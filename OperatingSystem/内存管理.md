# 内存管理

[TOC]

**主要负责内存的分配与回收（melloc和free）。将逻辑地址转换为物理地址。**



## 管理方式

**连续分配管理和非连续分配管理**。

连续分配管理比如块式管理，非连续分配管理比如页式管理和段式管理还有段页式管理

1. 块式管理：
   - 把内存分为几个固定大小的块，每个块只包含一个进程。
2. 页式管理：
   - **将内存分为大小相等的页**，且固定页的形式（4kb）。提高了内存利用率，减少了碎片，页式管理可以通过页表对应逻辑地址和物理地址。
3. 段式管理：
   - 页式管理无实际意义。而段式管理有实际意义，**每个段定义了一组逻辑信息**。比如代码段，数据段等。
4. 段页式管理：
   - 结合分段和分贝思想，先将用户程序分成若干段并分别赋予段名，再将这些段分为若干页
   - 地址结构:由段号、段内页号和页内地址三项共同构成地址



> 快表和多级页表

快表和多级页表都是页表管理中的。 快表是为了加速虚拟地址到物理地址的映射。快表放在缓存中，因此不需要对内存进行IO，速度更快。其流程如下：

- 先访问缓存中的快表，如果不存在
- 再去访问页表，如果有就把该想保存到快表中
- 当快表填满之后，需要进行淘汰。

多级页表是为了避免把全部页表一直放在内存中而占用空间。因此只存一部分在内存中。





## 页式管理

一种内存空间存储管理的技术，页式管理分为静态页式管理和动态页式管理。

将各进程的虚拟空间划分成若干个长度相等的页(page)，页式管理把内存空间按页的大小划分成片或者页面（page frame），然后把页式虚拟地址与内存地址建立一一对应页表，并用相应的硬件地址变换机构，来解决离散地址变换问题。页式管理采用请求调页或预调页技术实现了内外存存储器的统一管理。